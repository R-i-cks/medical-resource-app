{% extends 'layout.html' %}

{% block body %}

<nav class="navbar navbar-expand-lg bg-body-tertiary"  style="background-color: #5a441a;">
    <div class="container-fluid">

<ul class="nav justify-content-end">
    <li class="nav-item">
      <a class="nav-link active" href="{{ url_for('pesquisa_conc', lang='en') }}">En</a>
   </li>
    <li class="nav-item">
      <a class="nav-link active" href="{{ url_for('pesquisa_conc', lang='pt') }}">Pt</a>
    </li>
    <li class="nav-item">
      <a class="nav-link active"   href="{{ url_for('pesquisa_conc', lang='es') }}">Es</a>
    </li>
  </ul>

  <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
    Launch static backdrop modal
  </button>
</div>
</nav>

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">Add entry</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        
        <form id="add_entrada_form" action="/add_entrada" method="POST">

          <div class="input-group mb-3">
              <span class="input-group-text" id="basic-addon1">@</span>
              <input type="text" class="form-control" name="conc" id="validationServer01" placeholder="Conceito" aria-label="Conceito" aria-describedby="basic-addon1" required>
              <div id="validationServerUsernameFeedback" class="invalid-feedback">
                This concept is already in the database!
              </div>
            </div>
            
          <div class="input-group">
          <span class="input-group-text">Definição</span>
          <textarea class="form-control" aria-label="Definição" name="def"></textarea>
          </div>

          <label for="exampleDataList" class="form-label">Áreas de aplicação</label>
          <input class="form-control mb-3" list="datalistOptions" id="areasInput"  placeholder="Type to search...">
          <datalist id="datalistOptions">
            {%for area in areas%}
              <option value={{area}}>
            {% endfor %}
          </datalist>
          <div class="input-group-append">
            <button class="btn btn-outline-secondary" type="button" id="addArea" onclick="addBadge('areasInput', 'selectedAreas')">+</button>
          </div>
          <input type="hidden" name="areas">
          <br>
          
          <div id="selectedAreas" class="mb-3" ></div>

          <br>

          <label for="exampleDataList" class="form-label">Fontes</label>
          <input class="form-control mb-3"  id="fontesInput" placeholder="Type to search...">
          <div class="input-group-append">
            <button class="btn btn-outline-secondary" type="button" id="addFonte" onclick="addBadge('fontesInput', 'selectedFontes')">+</button>
          </div>
          <br>
          <input type="hidden" name="fontes">
          <div id="selectedFontes" class="mb-3"></div>

          <br>

          <label for="exampleDataList" class="form-label">Sinónimos</label>
          <input class="form-control" id="exampleDataList" name="sinonimos" placeholder="Type to search...">
          <br>

          <span class="badge rounded-pill text-bg-danger">Dark</span>

          <br>

          <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1">Index_Remissivo</span>
            <input type="text" class="form-control" placeholder="Index Remissivo" name="index_rem" aria-label="Index remissivo" aria-describedby="basic-addon1">
          </div>
          

        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary" data-bs-dismiss="modal">Confirm</button>
      </div>
    </div>
  </div>
</div>





<a id="back-to-top" href="#" style="margin-bottom: 90px; width: fit-content; margin-left: 93%;" class="fixed-bottom btn btn-secondary btn-lg back-to-top" role="button"><i class="fas fa-chevron-up"></i></a>

{% if pesquisa %}
<h3>Resultados para "{{pesquisa}}"</h3>
<p>{{res}} resultados encontrados</p>
<table class="table table-hover sticky-header">
    <thead class="thead-light">
        <tr>
        <th scope="col"><h2 class="text-start display-5">Conceito</h2></th>
        <th scope="col"><h2 class="text-start display-5">Definição</h2></th>
        </tr>
    </thead>
    <tbody>
        {%for conceito in conceitos%}
            <tr>
                <td><a href='/conceitos/{{lang}}/{{conceitos[conceito]["original"]}}' class="link-dark link-offset-2 link-underline-opacity-0 link-underline-opacity-100-hover">{{conceito | safe}}</a></td>
                <td>{{conceitos[conceito]["desc"] | safe}}</td>
            </tr>
        {%endfor%}
{% else %}
<br>
<br>
<table id="dados"  class="table table-hover sticky-header">
    <thead class="thead-light">
        <tr>
          <th scope="col"><h2 class="text-start display-5">Índice</h2></th>
          <th scope="col"><h2 class="text-start display-5">Conceito</h2></th>
          <th scope="col"><h2 class="text-start display-5">Fonte(s)</h2></th>
          <th scope="col"><h2 class="text-start display-5">Semelhante(s)</h2></th>
        </tr>
    </thead>
    <tbody>
        {% for conceito in conceitos %}
        <tr>
            <td><a class="list-group-item list-group-item-action" href="/conceitos/{{lang}}/{{conceito}}">{{conceito}}</a></td>
            <td>{{conceitos[conceito].Termo}}</td>
            <td>{{', '.join(conceitos[conceito].Fontes)}}</td>
            <td>{{', '.join(conceitos[conceito].Sinonimos)}}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}
    
{% endblock %}



<script>

document.getElementById('add_entrada_form').addEventListener('submit', function(event) {
    event.preventDefault(); 
    document.getElementById('areas').value = getBadgeText('selectedAreas');
    document.getElementById('fontes').value = getBadgeText('selectedFontes');
    this.submit(); 
});

</script>


